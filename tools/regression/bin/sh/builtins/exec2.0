# $FreeBSD: src/tools/regression/bin/sh/builtins/exec2.0,v 1.1 2010/05/28 22:40:24 jilles Exp $

failures=
failure() {
	echo "Error at line $1" >&2
	failures=x$failures
}

(
	exec -- >/dev/null
	echo bad
)
[ $? = 0 ] || failure $LINENO
(
	exec -- sh -c 'exit 42'
	echo bad
)
[ $? = 42 ] || failure $LINENO
(
	exec -- /var/empty/nosuch
	echo bad
) 2>/dev/null
[ $? = 127 ] || failure $LINENO

test -z "$failures"
